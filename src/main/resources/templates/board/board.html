<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">
<div layout:fragment="content">
    <!--  본문 영역 시작  -->

    <div class="container">
        <div class="py-5 text-center">
            <h2 th:text="${board.title}" style="color:#4F5E5A">게시물 제목</h2>
            <hr class="my-4">
            <div th:text="'작성자: ' + ${board.writer} + ' | 조회수: ' + ${board.views} + ' | 등록일: ' + ${board.regdate}" style="color:#4F5E5A">게시물 정보</div>
        </div>

        <div class="jumbotron jumbotron-fluid" style="background-color:transparent">
            <div class="container">
<!--                <h1 class="display-4">Fluid jumbotron</h1>-->
                <p class="lead" th:utext="${board.content}" style="color:#4F5E5A">게시물 내용</p>
            </div>
        </div>

        <!-- 해시태그 영역 -->
        <div th:each="tag : ${tagList}" style="display: flex">
            <span th:text="'#' + ${tag}" style="color: gray"></span>
        </div>
        <!-- 해시태그 영역 끝 -->


        <!-- 좋아요 -->
        <div style="display: flex">
            <!-- 좋아요 누르지 않았을 때 -->
            <i class="bi bi-suit-heart" id="heart-icon-false" th:if="${!likeFlag}" onclick="addLike(event); return;"></i>
            <!-- 좋아요 눌렀을 때 -->
            <i class="bi bi-suit-heart-fill" id="heart-icon-true" th:if="${likeFlag}"></i>
            <span style="margin: 0 0 2px 5px; color: #4F5E5A;" th:text="${board.likes}"></span>
            <form id="like-form" method="post" th:action="@{/like/add}">
            <!-- CSRF 공격에 대비한 임의의 난수 생성 -->
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                <input type="hidden" name="bid" th:name="bid" th:value="${board.id}" />
            </form>
        </div>

        <!-- 자바 스크립트 영역 -->
        <script>
            function addLike(event) {
                event.preventDefault();

                let form = document.getElementById("like-form");
                let iconFalse = document.getElementById("heart-icon-false");

                form.submit();
                iconFalse.classList.remove("bi-suit-heart");
                iconFalse.classList.add("bi-suit-heart-fill");
                iconFalse.onclick = null;
            }
        </script>

        <!-- 좋아요 영역 끝 -->



        <br><br>

        <!-- 댓글 영역 시작 -->
        <div th:replace="board/comment::#comment" th:with="commentList=${commentList}"></div>
        <!-- 댓글 영역 끝 -->

        <!-- 버튼 영역 시작 -->
        <div class="board-btn-div">
<!--            <button class="btn" style="font-weight:500;"-->
<!--                    th:onclick="|location.href='@{/write}'|"-->
<!--                    type="button">글쓰기</button>-->

            <button class="btn" style="font-weight:500;"
                    th:onclick="|location.href='@{/}'|"
                    type="button">목록</button>
        </div>
        <!-- 버튼 영역 끝 -->
        <div class="floating-button">
            <span class="move-write">
                <a class="write-btn" href="/write"></a>
            </span>
        </div>


    </div> <!-- /container -->

    <!--  본문 영역 끝  -->
</div>
</html>
